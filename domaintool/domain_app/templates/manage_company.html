{% extends 'base_dash.html' %}

{%load static%}

{% block notification %}
<li class="nav-item dropdown">
    <a class="nav-link" data-toggle="dropdown" href="#">
        <i class="far fa-bell" style="color:white; font-size:20px;"></i>
        <span class="badge badge-warning navbar-badge" id="domainCountBadge">{{ domain_count }}</span>
    </a>
    <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
        <span class="dropdown-item dropdown-header">Domains due expiry</span>
        <div class="dropdown-divider"></div>
        
        <!-- Dynamically generate dropdown items for each domain with days to expiry -->
        <div id="domainDropdownItems">
            {% for domain in expiring_domains %}
            <a href="#" class="dropdown-item">
                <i class="far fa-circle mr-2"></i>{{ domain.name }}
                <span class="float-right text-muted text-sm">{{ domain.remaining_days }} days</span>
            </a>
            {% endfor %}
        </div>
        
        <div class="dropdown-divider"></div>
    </div>
</li>
{% endblock %}

{% block content %}
<div class="col-lg-12 mx-1">
<div class="jumbotron">
  <h3 class="display-6">Add Company</h3>
  <hr class="my-4">
  <form action="" method="post" autocomplete="off">
    {% csrf_token %}
    {% load crispy_forms_tags %}
    <div class="row">
        <div class="col-md-8">
        {{ form.name|as_crispy_field }}
        </div>
        <div class="col-md-4">
            {{ form.address|as_crispy_field }}
        </div>
        <div class="col-md-8">
            {{ form.location|as_crispy_field }}
        </div>
    </div>
        <div class="row">
            <div class="col-md-8">
                <button type="submit" class="btn btn-success btn-block btn-lg"><i class="fa fa-database" aria-hidden="true"></i> Submit</button>
            </div>
            <div class="col-md-4">
                <a href="{% url 'lists' %}" class="btn btn-secondary btn-block btn-lg">
                <i class="fas fa-arrow-left"></i> Back to list
                </a>
            </div>
        </div>
   </form>
</div>
</div>
{% endblock content%}